name: gs-agent
on:
  push:
    branches:
      - main
    paths:
      - "*"
      - ".github/**"
      - "src/agent/**"
      - "src/schemas/**"
  pull_request:
    types:
      - closed
    paths:
      - "*"
      - ".github/**"
      - "src/agent/**"
      - "src/schemas/**"
  merge_group: # only fires if your repo uses merge queue
jobs:
  gs-agent:
    if: github.event_name != 'pull_request' || github.event.pull_request.merged == true
    uses: ./.github/workflows/python-package.yml
    secrets: inherit
    with:
      project-directory: "."
      package-directory: "./src/agent"
      package: "gs-agent"
